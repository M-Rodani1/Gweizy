name = "gas-fees-api"
main = "cloudflare-worker/worker.js"
compatibility_date = "2024-01-01"

# KV namespace for caching API responses
[[kv_namespaces]]
binding = "GAS_CACHE"
id = "c0a5b66e1c9342b286e47d709d6f9158"

# Cron triggers for automated maintenance
[triggers]
crons = [
  "*/5 * * * *",     # Collect gas data (every 5 minutes) - also keeps backend alive
  # "0 2 * * SUN",     # Retrain models weekly (DISABLED - manual retraining only)
  "0 */6 * * *",     # Health check every 6 hours
  "15 * * * *",      # Update prediction accuracy (hourly at :15)
  "30 * * * *"       # Validate predictions (hourly at :30)
]

# Environment variables
[vars]
BACKEND_API = "https://basegasfeesml-production.up.railway.app/api"
# Discord webhook for alerts (set via `wrangler secret put DISCORD_WEBHOOK_URL`)
# DISCORD_WEBHOOK_URL = "https://discord.com/api/webhooks/..."
